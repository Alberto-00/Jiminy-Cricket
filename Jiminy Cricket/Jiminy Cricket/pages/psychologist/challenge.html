<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jiminy Cricket - Challenge</title>
    <link rel="stylesheet" href="../../css/bootstrap/bootstrap.min.css">
    <script src="../../js/bootstrap/bootstrap.min.js"></script>
    <script src="../../js/jquery/jquery.js"></script>
    <script src="../../js/partials/lib.js"></script>
    <script src="../../js/partials/popup.js"></script>
    <link rel="stylesheet" href="../../css/partials/navbar.css">
    <link rel="stylesheet" href="../../css/font/stylesheet.css">
    <link rel="stylesheet" href="../../css/partials/library.css">
    <link rel="stylesheet" href="../../css/student/personalPage.css">
    <link rel="stylesheet" href="../../css/partials/footer.css">
    <link rel="stylesheet" href="../../css/partials/popupSuccess.css">
    <link rel="stylesheet" href="../../css/psychologist/challenge.css">
</head>
<body>
<!-- Navbar -->
<div w3-include-html="../partials/navbarPsyco.html"></div>
<script>
    includeHTML();
</script>
<!-- End Navbar -->

<h1 class="title font-title " style="margin-left: 3rem!important;margin-top: 3rem!important;">Le mie Challenge</h1>
<div style="margin-bottom: 10%">
       <div class="bg-white mt-5 mx-5 d-flex flex-column box br-t-l br-t-r br-b-l">
           <input id="title" type="text" class="fs-4 padding-l br-t-l br-t-r bottom-line" size="100" placeholder="Titolo">
           <textarea id="description" class="br-b-l padding-l" placeholder="Inserisci una descrizione" rows="5"></textarea>
       </div>
       <div class="bg-white  box br-b-l br-b-r d-flex flex-row-reverse align-items-center underBox">
           <p class="padding-l padding-r fs-5" style="margin-bottom: 3px!important; cursor: pointer" onclick="addChallenge()">Aggiungi</p>
       </div>
   </div>
</div>

<hr>

<div id="challengeContainer1" style="margin-bottom: 10%">
    <div id="challenge1" class="bg-white mt-5 mx-5 d-flex flex-column  box br-t-l br-t-r br-b-l br-b-r">
        <div class="d-flex bottom-line">
            <div class="p-2" style="margin-right: auto;width: 100%">
                <input id="titolo1" type="text" value="Urlo di Munch" size="100" readonly>
            </div>
            <div class="left-line">
                <div class="p-2" style="cursor: pointer">
                    <img id="pencil1" class="filterColorDark" src="../../img/challenge-icons/edit.svg" onclick="edit(1)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img id="downArrow1" class="filterColorDark " src="../../img/challenge-icons/downarrow.png" onclick="showMore(1)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img class="filterColorDark " src="../../img/x.svg" onclick="deleteChallenge(1)">
                </div>
            </div>
        </div>
        <input type="text" id="content1"class="padding-l br-b-l br-b-r" value="In un momento di rabbia e nervoso, per scaricare la tensione, urla tre volte appoggiando la faccia su un cuscino. " readonly>
        <input type="text" id="showMore1" class="padding-l br-b-l br-b-r" style="display: none" value="Ce la puoi fare!" readonly>
    </div>
    <div id="save1" class="bg-white  box br-b-l br-b-r d-flex flex-row-reverse align-items-center underBox d-none" onclick="saveChanges(1)">
        <p class="padding-l padding-r fs-5" style="margin-bottom: 3px!important; cursor: pointer">Salva</p>
    </div>
</div>

<div id="challengeContainer2" style="margin-bottom: 10%">
    <div id="challenge2" class="bg-white mt-5 mx-5 d-flex flex-column  box br-t-l br-t-r br-b-l br-b-r">
        <div class="d-flex bottom-line">
            <div class="p-2" style="margin-right: auto;width: 100%">
                <input id="titolo2" type="text" value="Aggiungi un posto a tavola" size="100" readonly>
            </div>
            <div class="left-line">
                <div class="p-2" style="cursor: pointer">
                    <img id="pencil2" class="filterColorDark" src="../../img/challenge-icons/edit.svg" onclick="edit(2)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img id="downArrow2" class="filterColorDark " src="../../img/challenge-icons/downarrow.png" onclick="showMore(2)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img class="filterColorDark " src="../../img/x.svg" onclick="deleteChallenge(2)">
                </div>
            </div>
        </div>
        <input type="text" id="content2"class="padding-l br-b-l br-b-r" value="Invita un tuo compagno a sedersi vicino a te durante la ricreazione." readonly>
        <input type="text" id="showMore2" class="padding-l br-b-l br-b-r" style="display: none" value="Ce la puoi fare!" readonly>
    </div>
    <div id="save2" class="bg-white  box br-b-l br-b-r d-flex flex-row-reverse align-items-center underBox d-none" onclick="saveChanges(2)">
        <p class="padding-l padding-r fs-5" style="margin-bottom: 3px!important; cursor: pointer">Salva</p>
    </div>
</div>

<div id="challengeContainer3" style="margin-bottom: 10%">
    <div id="challenge3" class="bg-white mt-5 mx-5 d-flex flex-column  box br-t-l br-t-r br-b-l br-b-r">
        <div class="d-flex bottom-line">
            <div class="p-2" style="margin-right: auto;width: 100%">
                <input id="titolo3" type="text" value="Come il vento" size="100" readonly>
            </div>
            <div class="left-line">
                <div class="p-2" style="cursor: pointer">
                    <img id="pencil3" class="filterColorDark" src="../../img/challenge-icons/edit.svg" onclick="edit(3)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img id="downArrow3" class="filterColorDark " src="../../img/challenge-icons/downarrow.png" onclick="showMore(3)">
                </div>
            </div>
            <div class="left-line" style="cursor: pointer">
                <div class="p-2">
                    <img class="filterColorDark " src="../../img/x.svg" onclick="deleteChallenge(3)">
                </div>
            </div>
        </div>
        <input type="text" id="content3"class="padding-l br-b-l br-b-r" value="Quando avverti l'ansia che sale, imita il rumore del vento con le labbra, facendo dei respiri molto profondi. " readonly>
        <input type="text" id="showMore3" class="padding-l br-b-l br-b-r" style="display: none" value="Ce la puoi fare!" readonly>
    </div>
    <div id="save3" class="bg-white  box br-b-l br-b-r d-flex flex-row-reverse align-items-center underBox d-none" onclick="saveChanges(3)">
        <p class="padding-l padding-r fs-5" style="margin-bottom: 3px!important; cursor: pointer">Salva</p>
    </div>
</div>





<div id="limit"></div>






<!-- Footer -->
<div w3-include-html="../partials/footer.html"></div>
<script>
    includeHTML();
    function changeImage(i){
        document.getElementById("clock"+i).src = "../../img/challenge-icons/check.svg";
    }
    var addOrRemove=true;
    function switchColor(i){
        if ( addOrRemove ) {
            $("#emoji"+i).removeClass( "filterColorDark" );
            $("#emoji"+i).addClass( "filterColorLight" );
            addOrRemove=false;
        } else {
            $("#emoji"+i).removeClass( "filterColorLight" );
            $("#emoji"+i).addClass( "filterColorDark" );
            addOrRemove=true;
        }
    }
</script>
<!-- End Footer-->
</body>
<script>

    var show=true;
    function showMore(i){
        if(show){
            $("#downArrow"+i).addClass("rotated");
            $("#showMore"+i).show();
            show=false;
        }
        else{
            $("#downArrow"+i).removeClass("rotated");
            $("#showMore"+i).hide();
            show=true;
        }
    }

    var editable=true;
    function edit(i){
        if(editable){
            $("#pencil"+i).addClass("speculated");
            $("#challenge"+i).removeClass("br-b-r");
            $("#save"+i).removeClass("d-none");
            $("#showMore"+i).show();

            $("#titolo"+i).removeAttr("readonly");
            $("#content"+i).removeAttr("readonly");
            $("#showMore"+i).removeAttr("readonly");

            editable=false;
        }
        else{

        }
    }

    function saveChanges(i){
        $("#pencil"+i).removeClass("speculated");
        $("#challenge"+i).addClass("br-b-r");
        $("#save"+i).addClass("d-none");
        $("#showMore"+i).hide();

        $("#titolo"+i).attr("readonly",true);
        $("#content"+i).attr("readonly",true);
        $("#showMore"+i).attr("readonly",true);

        editable=true;

        var text=$("#title"+i).val();
        $("#title"+i).val(text);

        text=$("#content"+i).val();
        $("#content"+i).val(text);

        text=$("#showMore"+i).val();
        $("#showMore"+i).val(text);

    }

    function deleteChallenge(i){
        $("#challengeContainer"+i).remove();
    }


    var i=3;
    function addChallenge(){
        i++;
        var challengeContainer="challengeContainer"+i;
        var challenge="challenge"+i;
        var titolo="titolo"+i;
        var pencil="pencil"+i;
        var downArrow="downArrow"+i;
        var content="content"+i;
        var showMore="showMore"+i;
        var save="save"+i;

        var testoTitolo=$("#title").val();
        var testoDescrizione=$("#description").val();


        $("#limit").prepend('<div id="'+challengeContainer+'" style="margin-bottom: 10%">\n' +
            '    <div id="'+challenge+'" class="bg-white mt-5 mx-5 d-flex flex-column  box br-t-l br-t-r br-b-l br-b-r">\n' +
            '        <div class="d-flex bottom-line">\n' +
            '            <div class="p-2" style="margin-right: auto;width: 100%">\n' +
            '                <input id="'+titolo+'" type="text" value="'+testoTitolo+'" size="100" readonly>\n' +
            '            </div>\n' +
            '            <div class="left-line">\n' +
            '                <div class="p-2">\n' +
            '                    <img id="'+pencil+'" class="filterColorDark" src="../../img/challenge-icons/edit.svg" onclick="edit(i)">\n' +
            '                </div>\n' +
            '            </div>\n' +
            '            <div class="left-line">\n' +
            '                <div class="p-2">\n' +
            '                    <img id="'+downArrow+'" class="filterColorDark " src="../../img/challenge-icons/downarrow.png" onclick="showMore(i)">\n' +
            '                </div>\n' +
            '            </div>\n'+
            '            <div class="left-line" style="cursor: pointer">\n' +
            '                <div class="p-2">\n' +
            '                    <img class="filterColorDark " src="../../img/x.svg" onclick="deleteChallenge(i)">\n' +
            '                </div>\n' +
            '            </div>\n'+
            '        </div>\n' +
            '        <input type="text" id="'+content+'"class="padding-l br-b-l br-b-r" value="'+testoDescrizione+'" readonly>\n' +
            '        <input type="text" id="'+showMore+'" class="padding-l br-b-l br-b-r" style="display: none" value="Ce la puoi fare!" readonly>\n' +
            '    </div>\n' +
            '    <div id="'+save+'" class="bg-white  box br-b-l br-b-r d-flex flex-row-reverse align-items-center underBox d-none" onclick="saveChanges(i)">\n' +
            '        <p class="padding-l padding-r fs-5" style="margin-bottom: 3px!important; ">Salva</p>\n' +
            '    </div>\n' +
            '</div>');

    }


    
</script>
</html>